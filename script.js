var Z=(D,E)=>()=>(E||D((E={exports:{}}).exports,E),E.exports);var H=Z((Q,B)=>{(function(){const E=document.createElement("link").relList;if(E&&E.supports&&E.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))f(g);new MutationObserver(g=>{for(const u of g)if(u.type==="childList")for(const L of u.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&f(L)}).observe(document,{childList:!0,subtree:!0});function p(g){const u={};return g.integrity&&(u.integrity=g.integrity),g.referrerPolicy&&(u.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?u.credentials="include":g.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function f(g){if(g.ep)return;g.ep=!0;const u=p(g);fetch(g.href,u)}})();(function(D){(function(E){/*! Full Tilt v0.5.3 / http://github.com/richtr/Full-Tilt */(function(p,f){var g={GyroNorm:f()};typeof define=="function"&&define.amd?define(function(){return g}):typeof B=="object"&&B.exports?B.exports=g:p.GyroNorm=g.GyroNorm})(this,function(){function p(t){return Math.round(t*Math.pow(10,P))/Math.pow(10,P)}function f(){var t={};t=h?o.getScreenAdjustedEuler():o.getFixedFrameEuler();var l=A.getScreenAdjustedAcceleration(),i=A.getScreenAdjustedAccelerationIncludingGravity(),n=A.getScreenAdjustedRotationRate(),a=0;O===u?(a=t.alpha-z,a=0>a?360-Math.abs(a):a):a=t.alpha;var r={do:{alpha:p(a),beta:p(t.beta),gamma:p(t.gamma),absolute:o.isAbsolute()},dm:{x:p(l.x),y:p(l.y),z:p(l.z),gx:p(i.x),gy:p(i.y),gz:p(i.z),alpha:p(n.alpha),beta:p(n.beta),gamma:p(n.gamma)}};return R&&(r.dm.gx*=m,r.dm.gy*=m,r.dm.gz*=m),r}function g(t){j&&(typeof t=="string"&&(t={message:t,code:0}),j(t))}var u="game",L="world",S="deviceorientation",C="acceleration",X="accelerationinludinggravity",F="rotationrate",T=null,z=0,m=0,c=!1,s=!1,o=null,A=null,I=50,R=!0,O=u,P=2,j=null,h=!1,e=function(t){};return e.GAME=u,e.WORLD=L,e.DEVICE_ORIENTATION=S,e.ACCELERATION=C,e.ACCELERATION_INCLUDING_GRAVITY=X,e.ROTATION_RATE=F,e.prototype.init=function(t){t&&t.frequency&&(I=t.frequency),t&&t.gravityNormalized&&(R=t.gravityNormalized),t&&t.orientationBase&&(O=t.orientationBase),t&&typeof t.decimalCount=="number"&&t.decimalCount>=0&&(P=parseInt(t.decimalCount)),t&&t.logger&&(j=t.logger),t&&t.screenAdjusted&&(h=t.screenAdjusted);var l=new FULLTILT.getDeviceOrientation({type:O}).then(function(n){o=n}),i=new FULLTILT.getDeviceMotion().then(function(n){A=n,m=A.getScreenAdjustedAccelerationIncludingGravity().z>0?-1:1});return Promise.all([l,i]).then(function(){s=!0})},e.prototype.end=function(){try{s=!1,this.stop(),A.stop(),o.stop()}catch(t){g(t)}},e.prototype.start=function(t){return s?(T=setInterval(function(){t(f())},I),void(c=!0)):void g({message:'GyroNorm is not initialized yet. First call the "init()" function.',code:1})},e.prototype.stop=function(){T&&(clearInterval(T),c=!1)},e.prototype.normalizeGravity=function(t){R=!!t},e.prototype.setHeadDirection=function(){return h||O===L?!1:(z=o.getFixedFrameEuler().alpha,!0)},e.prototype.startLogging=function(t){t&&(j=t)},e.prototype.stopLogging=function(){j=null},e.prototype.isAvailable=function(t){var l=o.getScreenAdjustedEuler(),i=A.getScreenAdjustedAcceleration(),n=A.getScreenAdjustedAccelerationIncludingGravity(),a=A.getScreenAdjustedRotationRate();switch(t){case S:return l.alpha&&l.alpha!==null&&l.beta&&l.beta!==null&&l.gamma&&l.gamma!==null;case C:return i&&i.x&&i.y&&i.z;case X:return n&&n.x&&n.y&&n.z;case F:return a&&a.alpha&&a.beta&&a.gamma;default:return{deviceOrientationAvailable:l.alpha&&l.alpha!==null&&l.beta&&l.beta!==null&&l.gamma&&l.gamma!==null,accelerationAvailable:i&&i.x&&i.y&&i.z,accelerationIncludingGravityAvailable:n&&n.x&&n.y&&n.z,rotationRateAvailable:a&&a.alpha&&a.beta&&a.gamma}}},e.prototype.isRunning=function(){return c},e}),typeof Q=="object"&&typeof B<"u"?B.exports=GyroNorm:typeof define=="function"&&define.amd?define("GyroNorm",[],function(){return GyroNorm}):E.GyroNorm=GyroNorm,typeof Q=="object"&&typeof B<"u"&&(Q.default=GyroNorm)})(this),D.GyroNorm||(D.GyroNorm=GyroNorm)})(window);(function(D){var E={};function p(f){if(E[f])return E[f].exports;var g=E[f]={i:f,l:!1,exports:{}};return D[f].call(g.exports,g,g.exports,p),g.l=!0,g.exports}p.m=D,p.c=E,p.d=function(f,g,u){p.o(f,g)||Object.defineProperty(f,g,{enumerable:!0,get:u})},p.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},p.t=function(f,g){if(1&g&&(f=p(f)),8&g||4&g&&typeof f=="object"&&f&&f.__esModule)return f;var u=Object.create(null);if(p.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:f}),2&g&&typeof f!="string")for(var L in f)p.d(u,L,(function(S){return f[S]}).bind(null,L));return u},p.n=function(f){var g=f&&f.__esModule?function(){return f.default}:function(){return f};return p.d(g,"a",g),g},p.o=function(f,g){return Object.prototype.hasOwnProperty.call(f,g)},p.p="js/",p(p.s=0)})([function(D,E,p){Object.defineProperty(E,"__esModule",{value:!0});var f=function(){function m(c,s){for(var o=0;o<s.length;o++){var A=s[o];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(c,A.key,A)}}return function(c,s,o){return s&&m(c.prototype,s),o&&m(c,o),c}}(),g=L(p(1)),u=L(p(2));function L(m){return m&&m.__esModule?m:{default:m}}var S=new(L(p(3))).default.GyroNorm,C=function(){function m(){(function(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")})(this,m),this.container=document.getElementById("gl"),this.canvas=document.createElement("canvas"),this.container.appendChild(this.canvas),this.gl=this.canvas.getContext("webgl"),this.ratio=window.devicePixelRatio,this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.mouseX=0,this.mouseY=0,this.mouseTargetX=0,this.mouseTargetY=0,this.imageOriginal=this.container.getAttribute("data-imageOriginal"),this.imageDepth=this.container.getAttribute("data-imageDepth"),this.vth=this.container.getAttribute("data-verticalThreshold"),this.hth=this.container.getAttribute("data-horizontalThreshold"),this.imageURLs=[this.imageOriginal,this.imageDepth],this.textures=[],this.startTime=new Date().getTime(),this.createScene(),this.addTexture(),this.mouseMove(),this.gyro()}return f(m,[{key:"addShader",value:function(c,s){var o=this.gl.createShader(s);if(this.gl.shaderSource(o,c),this.gl.compileShader(o),!this.gl.getShaderParameter(o,this.gl.COMPILE_STATUS))throw new Error("Shader compile error: "+this.gl.getShaderInfoLog(o));this.gl.attachShader(this.program,o)}},{key:"resizeHandler",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.canvas.width=this.width*this.ratio,this.canvas.height=this.height*this.ratio,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px";var c=void 0,s=void 0;this.height/this.width<this.imageAspect?(c=1,s=this.height/this.width/this.imageAspect):(c=this.width/this.height*this.imageAspect,s=1),this.uResolution.set(this.width,this.height,c,s),this.uRatio.set(1/this.ratio),this.uThreshold.set(this.hth,this.vth),this.gl.viewport(0,0,this.width*this.ratio,this.height*this.ratio)}},{key:"resize",value:function(){this.resizeHandler(),window.addEventListener("resize",this.resizeHandler.bind(this))}},{key:"createScene",value:function(){this.program=this.gl.createProgram(),this.addShader(u.default,this.gl.VERTEX_SHADER),this.addShader(g.default,this.gl.FRAGMENT_SHADER),this.gl.linkProgram(this.program),this.gl.useProgram(this.program),this.uResolution=new F("resolution","4f",this.program,this.gl),this.uMouse=new F("mouse","2f",this.program,this.gl),this.uTime=new F("time","1f",this.program,this.gl),this.uRatio=new F("pixelRatio","1f",this.program,this.gl),this.uThreshold=new F("threshold","2f",this.program,this.gl),this.billboard=new T(this.gl),this.positionLocation=this.gl.getAttribLocation(this.program,"a_position"),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.vertexAttribPointer(this.positionLocation,2,this.gl.FLOAT,!1,0,0)}},{key:"addTexture",value:function(){this.gl,function(c,s){for(var o=[],A=c.length,I=function(){--A===0&&s(o)},R=0;R<A;++R){var O=X(c[R],I);o.push(O)}}(this.imageURLs,this.start.bind(this))}},{key:"start",value:function(c){var s=this.gl;this.imageAspect=c[0].naturalHeight/c[0].naturalWidth,console.log(this.imageAspect,"=aspect",this);for(var o=0;o<c.length;o++){var A=s.createTexture();s.bindTexture(s.TEXTURE_2D,A),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,c[o]),this.textures.push(A)}var I=this.gl.getUniformLocation(this.program,"image0"),R=this.gl.getUniformLocation(this.program,"image1");this.gl.uniform1i(I,0),this.gl.uniform1i(R,1),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[0]),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[1]),this.resize(),this.render()}},{key:"gyro",value:function(){var c=this;this.maxTilt=15,S.init({gravityNormalized:!0}).then(function(){S.start(function(s){var o=s.do.gamma,A=s.do.beta;c.mouseTargetY=z(A,-c.maxTilt,c.maxTilt)/c.maxTilt,c.mouseTargetX=-z(o,-c.maxTilt,c.maxTilt)/c.maxTilt})}).catch(function(s){console.log("not supported")})}},{key:"mouseMove",value:function(){var c=this;document.addEventListener("mousemove",function(s){var o=c.windowWidth/2,A=c.windowHeight/2;c.mouseTargetX=(o-s.clientX)/o,c.mouseTargetY=(A-s.clientY)/A})}},{key:"render",value:function(){var c=(new Date().getTime()-this.startTime)/1e3;this.uTime.set(c),this.mouseX+=.05*(this.mouseTargetX-this.mouseX),this.mouseY+=.05*(this.mouseTargetY-this.mouseY),this.uMouse.set(this.mouseX,this.mouseY),this.billboard.render(this.gl),requestAnimationFrame(this.render.bind(this))}}]),m}();function X(m,c){var s=new Image;return s.src=m,s.onload=c,s}function F(m,c,s,o){this.name=m,this.suffix=c,this.gl=o,this.program=s,this.location=o.getUniformLocation(s,m)}function T(m){var c=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,c),m.bufferData(m.ARRAY_BUFFER,T.verts,m.STATIC_DRAW)}function z(m,c,s){return m==m&&(s!==void 0&&(m=m<=s?m:s),c!==void 0&&(m=m>=c?m:c)),m}E.default=C,F.prototype.set=function(){for(var m="uniform"+this.suffix,c=arguments.length,s=Array(c),o=0;o<c;o++)s[o]=arguments[o];var A=[this.location].concat(s);this.gl[m].apply(this.gl,A)},T.verts=new Float32Array([-1,-1,1,-1,-1,1,1,1]),T.prototype.render=function(m){m.drawArrays(m.TRIANGLE_STRIP,0,4)},new C},function(D,E){D.exports=`#ifdef GL_ES
  precision mediump float;
#define GLSLIFY 1
#endif

uniform vec4 resolution;
uniform vec2 mouse;
uniform vec2 threshold;
uniform float time;
uniform float pixelRatio;
uniform sampler2D image0;
uniform sampler2D image1;


vec2 mirrored(vec2 v) {
  vec2 m = mod(v,2.);
  return mix(m,2.0 - m, step(1.0 ,m));
}

void main() {
  // uvs and textures
  vec2 uv = pixelRatio*gl_FragCoord.xy / resolution.xy ;
  vec2 vUv = (uv - vec2(0.5))*resolution.zw + vec2(0.5);
  vUv.y = 1. - vUv.y;
  vec4 tex1 = texture2D(image1,mirrored(vUv));
  // tex1.r = 1. - tex1.r;
  // tex1.r = tex1.r*tex1.r;
  vec2 fake3d = vec2(vUv.x + (tex1.r - 0.5)*mouse.x/threshold.x, vUv.y + (tex1.r - 0.5)*mouse.y/threshold.y);
  vec4 tex0 = texture2D(image0,mirrored(fake3d));
  


  gl_FragColor = vec4(uv,0.,1.);
  gl_FragColor = tex0;
}`},function(D,E){D.exports=`#define GLSLIFY 1
attribute vec2 a_position;

void main() {
  gl_Position = vec4( a_position, 0, 1 );
}`},function(D,E,p){var f,g;(function(u){function L(e){return(e=+e)==0||isNaN(e)?e:e>0?1:-1}function S(e){return new Promise(function(t,l){(function i(n){setTimeout(function(){e&&e.data?t():n>=20?l():i(++n)},50)})(0)})}function C(){I=A?(u.screen.orientation.angle||0)*c:(u.orientation||0)*c}function X(e){for(var t in o.orientation.data=e,o.orientation.callbacks)o.orientation.callbacks[t].call(this)}function F(e){for(var t in o.motion.data=e,o.motion.callbacks)o.motion.callbacks[t].call(this)}if(u.FULLTILT===void 0||u.FULLTILT===null){var T=Math.PI,z=T/2,m=2*T,c=T/180,s=180/T,o={orientation:{active:!1,callbacks:[],data:void 0},motion:{active:!1,callbacks:[],data:void 0}},A=!(!u.screen||!u.screen.orientation||u.screen.orientation.angle===void 0||u.screen.orientation.angle===null),I=(A?u.screen.orientation.angle:u.orientation||0)*c,R=z,O=T,P=m/3,j=-z,h={version:"0.5.3",getDeviceOrientation:function(e){return new Promise(function(t,l){var i=new h.DeviceOrientation(e);i.start(),new S(o.orientation).then(function(){i._alphaAvailable=o.orientation.data.alpha&&o.orientation.data.alpha!==null,i._betaAvailable=o.orientation.data.beta&&o.orientation.data.beta!==null,i._gammaAvailable=o.orientation.data.gamma&&o.orientation.data.gamma!==null,t(i)}).catch(function(){i.stop(),l("DeviceOrientation is not supported")})})},getDeviceMotion:function(e){return new Promise(function(t,l){var i=new h.DeviceMotion(e);i.start(),new S(o.motion).then(function(){i._accelerationXAvailable=o.motion.data.acceleration&&o.motion.data.acceleration.x,i._accelerationYAvailable=o.motion.data.acceleration&&o.motion.data.acceleration.y,i._accelerationZAvailable=o.motion.data.acceleration&&o.motion.data.acceleration.z,i._accelerationIncludingGravityXAvailable=o.motion.data.accelerationIncludingGravity&&o.motion.data.accelerationIncludingGravity.x,i._accelerationIncludingGravityYAvailable=o.motion.data.accelerationIncludingGravity&&o.motion.data.accelerationIncludingGravity.y,i._accelerationIncludingGravityZAvailable=o.motion.data.accelerationIncludingGravity&&o.motion.data.accelerationIncludingGravity.z,i._rotationRateAlphaAvailable=o.motion.data.rotationRate&&o.motion.data.rotationRate.alpha,i._rotationRateBetaAvailable=o.motion.data.rotationRate&&o.motion.data.rotationRate.beta,i._rotationRateGammaAvailable=o.motion.data.rotationRate&&o.motion.data.rotationRate.gamma,t(i)}).catch(function(){i.stop(),l("DeviceMotion is not supported")})})},Quaternion:function(e,t,l,i){var n;this.set=function(a,r,y,b){this.x=a||0,this.y=r||0,this.z=y||0,this.w=b||1},this.copy=function(a){this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w},this.setFromEuler=function(){var a,r,y,b,x,v,w,_,M,d,G,N;return function(U){return y=((U=U||{}).alpha||0)*c,a=(U.beta||0)*c,r=(U.gamma||0)*c,v=y/2,b=a/2,x=r/2,w=Math.cos(b),_=Math.cos(x),M=Math.cos(v),d=Math.sin(b),G=Math.sin(x),N=Math.sin(v),this.set(d*_*M-w*G*N,w*G*M+d*_*N,w*_*N+d*G*M,w*_*M-d*G*N),this.normalize(),this}}(),this.setFromRotationMatrix=function(){var a;return function(r){return a=r.elements,this.set(.5*Math.sqrt(1+a[0]-a[4]-a[8])*L(a[7]-a[5]),.5*Math.sqrt(1-a[0]+a[4]-a[8])*L(a[2]-a[6]),.5*Math.sqrt(1-a[0]-a[4]+a[8])*L(a[3]-a[1]),.5*Math.sqrt(1+a[0]+a[4]+a[8])),this}}(),this.multiply=function(a){return n=h.Quaternion.prototype.multiplyQuaternions(this,a),this.copy(n),this},this.rotateX=function(a){return n=h.Quaternion.prototype.rotateByAxisAngle(this,[1,0,0],a),this.copy(n),this},this.rotateY=function(a){return n=h.Quaternion.prototype.rotateByAxisAngle(this,[0,1,0],a),this.copy(n),this},this.rotateZ=function(a){return n=h.Quaternion.prototype.rotateByAxisAngle(this,[0,0,1],a),this.copy(n),this},this.normalize=function(){return h.Quaternion.prototype.normalize(this)},this.set(e,t,l,i)}};h.Quaternion.prototype={constructor:h.Quaternion,multiplyQuaternions:function(){var e=new h.Quaternion;return function(t,l){var i=t.x,n=t.y,a=t.z,r=t.w,y=l.x,b=l.y,x=l.z,v=l.w;return e.set(i*v+r*y+n*x-a*b,n*v+r*b+a*y-i*x,a*v+r*x+i*b-n*y,r*v-i*y-n*b-a*x),e}}(),normalize:function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w);return t===0?(e.x=0,e.y=0,e.z=0,e.w=1):(t=1/t,e.x*=t,e.y*=t,e.z*=t,e.w*=t),e},rotateByAxisAngle:function(){var e,t,l=new h.Quaternion,i=new h.Quaternion;return function(n,a,r){return e=(r||0)/2,t=Math.sin(e),i.set((a[0]||0)*t,(a[1]||0)*t,(a[2]||0)*t,Math.cos(e)),l=h.Quaternion.prototype.multiplyQuaternions(n,i),h.Quaternion.prototype.normalize(l)}}()},h.RotationMatrix=function(e,t,l,i,n,a,r,y,b){var x;this.elements=new Float32Array(9),this.identity=function(){return this.set(1,0,0,0,1,0,0,0,1),this},this.set=function(v,w,_,M,d,G,N,U,Y){this.elements[0]=v||1,this.elements[1]=w||0,this.elements[2]=_||0,this.elements[3]=M||0,this.elements[4]=d||1,this.elements[5]=G||0,this.elements[6]=N||0,this.elements[7]=U||0,this.elements[8]=Y||1},this.copy=function(v){this.elements[0]=v.elements[0],this.elements[1]=v.elements[1],this.elements[2]=v.elements[2],this.elements[3]=v.elements[3],this.elements[4]=v.elements[4],this.elements[5]=v.elements[5],this.elements[6]=v.elements[6],this.elements[7]=v.elements[7],this.elements[8]=v.elements[8]},this.setFromEuler=function(){var v,w,_,M,d,G,N,U,Y;return function(k){return _=((k=k||{}).alpha||0)*c,v=(k.beta||0)*c,w=(k.gamma||0)*c,M=Math.cos(v),d=Math.cos(w),G=Math.cos(_),N=Math.sin(v),U=Math.sin(w),Y=Math.sin(_),this.set(G*d-Y*N*U,-M*Y,d*Y*N+G*U,d*Y+G*N*U,G*M,Y*U-G*d*N,-M*U,N,M*d),this.normalize(),this}}(),this.setFromQuaternion=function(){var v,w,_,M;return function(d){return v=d.w*d.w,w=d.x*d.x,_=d.y*d.y,M=d.z*d.z,this.set(v+w-_-M,2*(d.x*d.y-d.w*d.z),2*(d.x*d.z+d.w*d.y),2*(d.x*d.y+d.w*d.z),v-w+_-M,2*(d.y*d.z-d.w*d.x),2*(d.x*d.z-d.w*d.y),2*(d.y*d.z+d.w*d.x),v-w-_+M),this}}(),this.multiply=function(v){return x=h.RotationMatrix.prototype.multiplyMatrices(this,v),this.copy(x),this},this.rotateX=function(v){return x=h.RotationMatrix.prototype.rotateByAxisAngle(this,[1,0,0],v),this.copy(x),this},this.rotateY=function(v){return x=h.RotationMatrix.prototype.rotateByAxisAngle(this,[0,1,0],v),this.copy(x),this},this.rotateZ=function(v){return x=h.RotationMatrix.prototype.rotateByAxisAngle(this,[0,0,1],v),this.copy(x),this},this.normalize=function(){return h.RotationMatrix.prototype.normalize(this)},this.set(e,t,l,i,n,a,r,y,b)},h.RotationMatrix.prototype={constructor:h.RotationMatrix,multiplyMatrices:function(){var e,t,l=new h.RotationMatrix;return function(i,n){return e=i.elements,t=n.elements,l.set(e[0]*t[0]+e[1]*t[3]+e[2]*t[6],e[0]*t[1]+e[1]*t[4]+e[2]*t[7],e[0]*t[2]+e[1]*t[5]+e[2]*t[8],e[3]*t[0]+e[4]*t[3]+e[5]*t[6],e[3]*t[1]+e[4]*t[4]+e[5]*t[7],e[3]*t[2]+e[4]*t[5]+e[5]*t[8],e[6]*t[0]+e[7]*t[3]+e[8]*t[6],e[6]*t[1]+e[7]*t[4]+e[8]*t[7],e[6]*t[2]+e[7]*t[5]+e[8]*t[8]),l}}(),normalize:function(e){var t=e.elements,l=t[0]*t[4]*t[8]-t[0]*t[5]*t[7]-t[1]*t[3]*t[8]+t[1]*t[5]*t[6]+t[2]*t[3]*t[7]-t[2]*t[4]*t[6];return t[0]/=l,t[1]/=l,t[2]/=l,t[3]/=l,t[4]/=l,t[5]/=l,t[6]/=l,t[7]/=l,t[8]/=l,e.elements=t,e},rotateByAxisAngle:function(){var e,t,l=new h.RotationMatrix,i=new h.RotationMatrix,n=!1;return function(a,r,y){return i.identity(),n=!1,e=Math.sin(y),t=Math.cos(y),r[0]===1&&r[1]===0&&r[2]===0?(n=!0,i.elements[4]=t,i.elements[5]=-e,i.elements[7]=e,i.elements[8]=t):r[1]===1&&r[0]===0&&r[2]===0?(n=!0,i.elements[0]=t,i.elements[2]=e,i.elements[6]=-e,i.elements[8]=t):r[2]===1&&r[0]===0&&r[1]===0&&(n=!0,i.elements[0]=t,i.elements[1]=-e,i.elements[3]=e,i.elements[4]=t),n?(l=h.RotationMatrix.prototype.multiplyMatrices(a,i),l=h.RotationMatrix.prototype.normalize(l)):l=a,l}}()},h.Euler=function(e,t,l){this.set=function(i,n,a){this.alpha=i||0,this.beta=n||0,this.gamma=a||0},this.copy=function(i){this.alpha=i.alpha,this.beta=i.beta,this.gamma=i.gamma},this.setFromRotationMatrix=function(){var i,n,a,r;return function(y){(i=y.elements)[8]>0?(n=Math.atan2(-i[1],i[4]),a=Math.asin(i[7]),r=Math.atan2(-i[6],i[8])):i[8]<0?(n=Math.atan2(i[1],-i[4]),a=-Math.asin(i[7]),a+=a>=0?-T:T,r=Math.atan2(i[6],-i[8])):i[6]>0?(n=Math.atan2(-i[1],i[4]),a=Math.asin(i[7]),r=-z):i[6]<0?(n=Math.atan2(i[1],-i[4]),a=-Math.asin(i[7]),a+=a>=0?-T:T,r=-z):(n=Math.atan2(i[3],i[0]),a=i[7]>0?z:-z,r=0),0>n&&(n+=m),n*=s,a*=s,r*=s,this.set(n,a,r)}}(),this.setFromQuaternion=function(){var i,n,a;return function(r){var y=r.w*r.w,b=r.x*r.x,x=r.y*r.y,v=r.z*r.z,w=y+b+x+v,_=r.w*r.x+r.y*r.z;if(_>.499999*w)i=2*Math.atan2(r.y,r.w),n=z,a=0;else if((1e-6-.5)*w>_)i=-2*Math.atan2(r.y,r.w),n=-z,a=0;else{var M=y-b+x-v,d=2*(r.w*r.z-r.x*r.y),G=y-b-x+v,N=2*(r.w*r.y-r.x*r.z);G>0?(i=Math.atan2(d,M),n=Math.asin(2*_/w),a=Math.atan2(N,G)):(i=Math.atan2(-d,-M),n=-Math.asin(2*_/w),n+=0>n?T:-T,a=Math.atan2(-N,-G))}0>i&&(i+=m),i*=s,n*=s,a*=s,this.set(i,n,a)}}(),this.rotateX=function(i){return h.Euler.prototype.rotateByAxisAngle(this,[1,0,0],i),this},this.rotateY=function(i){return h.Euler.prototype.rotateByAxisAngle(this,[0,1,0],i),this},this.rotateZ=function(i){return h.Euler.prototype.rotateByAxisAngle(this,[0,0,1],i),this},this.set(e,t,l)},h.Euler.prototype={constructor:h.Euler,rotateByAxisAngle:function(){var e=new h.RotationMatrix;return function(t,l,i){return e.setFromEuler(t),e=h.RotationMatrix.prototype.rotateByAxisAngle(e,l,i),t.setFromRotationMatrix(e),t}}()},h.DeviceOrientation=function(e){this.options=e||{};var t=0,l=0;if(this.alphaOffsetScreen=0,this.alphaOffsetDevice=void 0,this.options.type==="game"){var i=(function(a){return a.alpha!==null&&(this.alphaOffsetDevice=new h.Euler(a.alpha,0,0),this.alphaOffsetDevice.rotateZ(-I),++l>=10)?void u.removeEventListener("deviceorientation",i,!1):void(++t>=200&&u.removeEventListener("deviceorientation",i,!1))}).bind(this);u.addEventListener("deviceorientation",i,!1)}else if(this.options.type==="world"){var n=(function(a){return a.absolute!==!0&&a.webkitCompassAccuracy!==void 0&&a.webkitCompassAccuracy!==null&&+a.webkitCompassAccuracy>=0&&+a.webkitCompassAccuracy<50&&(this.alphaOffsetDevice=new h.Euler(a.webkitCompassHeading,0,0),this.alphaOffsetDevice.rotateZ(I),this.alphaOffsetScreen=I,++l>=10)?void u.removeEventListener("deviceorientation",n,!1):void(++t>=200&&u.removeEventListener("deviceorientation",n,!1))}).bind(this);u.addEventListener("deviceorientation",n,!1)}},h.DeviceOrientation.prototype={constructor:h.DeviceOrientation,start:function(e){e&&Object.prototype.toString.call(e)=="[object Function]"&&o.orientation.callbacks.push(e),A?u.screen.orientation.addEventListener("change",C,!1):u.addEventListener("orientationchange",C,!1),o.orientation.active||(u.addEventListener("deviceorientation",X,!1),o.orientation.active=!0)},stop:function(){o.orientation.active&&(u.removeEventListener("deviceorientation",X,!1),o.orientation.active=!1)},listen:function(e){this.start(e)},getFixedFrameQuaternion:function(){var e=new h.Euler,t=new h.RotationMatrix,l=new h.Quaternion;return function(){var i=o.orientation.data||{alpha:0,beta:0,gamma:0},n=i.alpha;return this.alphaOffsetDevice&&(t.setFromEuler(this.alphaOffsetDevice),t.rotateZ(-this.alphaOffsetScreen),e.setFromRotationMatrix(t),e.alpha<0&&(e.alpha+=360),e.alpha%=360,n-=e.alpha),e.set(n,i.beta,i.gamma),l.setFromEuler(e),l}}(),getScreenAdjustedQuaternion:function(){var e;return function(){return(e=this.getFixedFrameQuaternion()).rotateZ(-I),e}}(),getFixedFrameMatrix:function(){var e=new h.Euler,t=new h.RotationMatrix;return function(){var l=o.orientation.data||{alpha:0,beta:0,gamma:0},i=l.alpha;return this.alphaOffsetDevice&&(t.setFromEuler(this.alphaOffsetDevice),t.rotateZ(-this.alphaOffsetScreen),e.setFromRotationMatrix(t),e.alpha<0&&(e.alpha+=360),e.alpha%=360,i-=e.alpha),e.set(i,l.beta,l.gamma),t.setFromEuler(e),t}}(),getScreenAdjustedMatrix:function(){var e;return function(){return(e=this.getFixedFrameMatrix()).rotateZ(-I),e}}(),getFixedFrameEuler:function(){var e,t=new h.Euler;return function(){return e=this.getFixedFrameMatrix(),t.setFromRotationMatrix(e),t}}(),getScreenAdjustedEuler:function(){var e,t=new h.Euler;return function(){return e=this.getScreenAdjustedMatrix(),t.setFromRotationMatrix(e),t}}(),isAbsolute:function(){return!(!o.orientation.data||o.orientation.data.absolute!==!0)},getLastRawEventData:function(){return o.orientation.data||{}},_alphaAvailable:!1,_betaAvailable:!1,_gammaAvailable:!1,isAvailable:function(e){switch(e){case this.ALPHA:return this._alphaAvailable;case this.BETA:return this._betaAvailable;case this.GAMMA:return this._gammaAvailable}},ALPHA:"alpha",BETA:"beta",GAMMA:"gamma"},h.DeviceMotion=function(e){this.options=e||{}},h.DeviceMotion.prototype={constructor:h.DeviceMotion,start:function(e){e&&Object.prototype.toString.call(e)=="[object Function]"&&o.motion.callbacks.push(e),A?u.screen.orientation.addEventListener("change",C,!1):u.addEventListener("orientationchange",C,!1),o.motion.active||(u.addEventListener("devicemotion",F,!1),o.motion.active=!0)},stop:function(){o.motion.active&&(u.removeEventListener("devicemotion",F,!1),o.motion.active=!1)},listen:function(e){this.start(e)},getScreenAdjustedAcceleration:function(){var e=o.motion.data&&o.motion.data.acceleration?o.motion.data.acceleration:{x:0,y:0,z:0},t={};switch(I){case R:t.x=-e.y,t.y=e.x;break;case O:t.x=-e.x,t.y=-e.y;break;case P:case j:t.x=e.y,t.y=-e.x;break;default:t.x=e.x,t.y=e.y}return t.z=e.z,t},getScreenAdjustedAccelerationIncludingGravity:function(){var e=o.motion.data&&o.motion.data.accelerationIncludingGravity?o.motion.data.accelerationIncludingGravity:{x:0,y:0,z:0},t={};switch(I){case R:t.x=-e.y,t.y=e.x;break;case O:t.x=-e.x,t.y=-e.y;break;case P:case j:t.x=e.y,t.y=-e.x;break;default:t.x=e.x,t.y=e.y}return t.z=e.z,t},getScreenAdjustedRotationRate:function(){var e=o.motion.data&&o.motion.data.rotationRate?o.motion.data.rotationRate:{alpha:0,beta:0,gamma:0},t={};switch(I){case R:t.beta=-e.gamma,t.gamma=e.beta;break;case O:t.beta=-e.beta,t.gamma=-e.gamma;break;case P:case j:t.beta=e.gamma,t.gamma=-e.beta;break;default:t.beta=e.beta,t.gamma=e.gamma}return t.alpha=e.alpha,t},getLastRawEventData:function(){return o.motion.data||{}},_accelerationXAvailable:!1,_accelerationYAvailable:!1,_accelerationZAvailable:!1,_accelerationIncludingGravityXAvailable:!1,_accelerationIncludingGravityYAvailable:!1,_accelerationIncludingGravityZAvailable:!1,_rotationRateAlphaAvailable:!1,_rotationRateBetaAvailable:!1,_rotationRateGammaAvailable:!1,isAvailable:function(e){switch(e){case this.ACCELERATION_X:return this._accelerationXAvailable;case this.ACCELERATION_Y:return this._accelerationYAvailable;case this.ACCELERATION_Z:return this._accelerationZAvailable;case this.ACCELERATION_INCLUDING_GRAVITY_X:return this._accelerationIncludingGravityXAvailable;case this.ACCELERATION_INCLUDING_GRAVITY_Y:return this._accelerationIncludingGravityYAvailable;case this.ACCELERATION_INCLUDING_GRAVITY_Z:return this._accelerationIncludingGravityZAvailable;case this.ROTATION_RATE_ALPHA:return this._rotationRateAlphaAvailable;case this.ROTATION_RATE_BETA:return this._rotationRateBetaAvailable;case this.ROTATION_RATE_GAMMA:return this._rotationRateGammaAvailable}},ACCELERATION_X:"accelerationX",ACCELERATION_Y:"accelerationY",ACCELERATION_Z:"accelerationZ",ACCELERATION_INCLUDING_GRAVITY_X:"accelerationIncludingGravityX",ACCELERATION_INCLUDING_GRAVITY_Y:"accelerationIncludingGravityY",ACCELERATION_INCLUDING_GRAVITY_Z:"accelerationIncludingGravityZ",ROTATION_RATE_ALPHA:"rotationRateAlpha",ROTATION_RATE_BETA:"rotationRateBeta",ROTATION_RATE_GAMMA:"rotationRateGamma"},u.FULLTILT=h}})(window),g={GyroNorm:function(){function u(n){return Math.round(n*Math.pow(10,e))/Math.pow(10,e)}function L(){var n={};n=l?R.getScreenAdjustedEuler():R.getFixedFrameEuler();var a=O.getScreenAdjustedAcceleration(),r=O.getScreenAdjustedAccelerationIncludingGravity(),y=O.getScreenAdjustedRotationRate(),b=0;h===C?b=0>(b=n.alpha-s)?360-Math.abs(b):b:b=n.alpha;var x={do:{alpha:u(b),beta:u(n.beta),gamma:u(n.gamma),absolute:R.isAbsolute()},dm:{x:u(a.x),y:u(a.y),z:u(a.z),gx:u(r.x),gy:u(r.y),gz:u(r.z),alpha:u(y.alpha),beta:u(y.beta),gamma:u(y.gamma)}};return j&&(x.dm.gx*=o,x.dm.gy*=o,x.dm.gz*=o),x}function S(n){t&&(typeof n=="string"&&(n={message:n,code:0}),t(n))}var C="game",X="world",F="deviceorientation",T="acceleration",z="accelerationinludinggravity",m="rotationrate",c=null,s=0,o=0,A=!1,I=!1,R=null,O=null,P=50,j=!0,h=C,e=2,t=null,l=!1,i=function(n){};return i.GAME=C,i.WORLD=X,i.DEVICE_ORIENTATION=F,i.ACCELERATION=T,i.ACCELERATION_INCLUDING_GRAVITY=z,i.ROTATION_RATE=m,i.prototype.init=function(n){n&&n.frequency&&(P=n.frequency),n&&n.gravityNormalized&&(j=n.gravityNormalized),n&&n.orientationBase&&(h=n.orientationBase),n&&typeof n.decimalCount=="number"&&n.decimalCount>=0&&(e=parseInt(n.decimalCount)),n&&n.logger&&(t=n.logger),n&&n.screenAdjusted&&(l=n.screenAdjusted);var a=new FULLTILT.getDeviceOrientation({type:h}).then(function(y){R=y}),r=new FULLTILT.getDeviceMotion().then(function(y){o=(O=y).getScreenAdjustedAccelerationIncludingGravity().z>0?-1:1});return Promise.all([a,r]).then(function(){I=!0})},i.prototype.end=function(){try{I=!1,this.stop(),O.stop(),R.stop()}catch(n){S(n)}},i.prototype.start=function(n){return I?(c=setInterval(function(){n(L())},P),void(A=!0)):void S({message:'GyroNorm is not initialized yet. First call the "init()" function.',code:1})},i.prototype.stop=function(){c&&(clearInterval(c),A=!1)},i.prototype.normalizeGravity=function(n){j=!!n},i.prototype.setHeadDirection=function(){return!l&&h!==X&&(s=R.getFixedFrameEuler().alpha,!0)},i.prototype.startLogging=function(n){n&&(t=n)},i.prototype.stopLogging=function(){t=null},i.prototype.isAvailable=function(n){var a=R.getScreenAdjustedEuler(),r=O.getScreenAdjustedAcceleration(),y=O.getScreenAdjustedAccelerationIncludingGravity(),b=O.getScreenAdjustedRotationRate();switch(n){case F:return a.alpha&&a.alpha!==null&&a.beta&&a.beta!==null&&a.gamma&&a.gamma!==null;case T:return r&&r.x&&r.y&&r.z;case z:return y&&y.x&&y.y&&y.z;case m:return b&&b.alpha&&b.beta&&b.gamma;default:return{deviceOrientationAvailable:a.alpha&&a.alpha!==null&&a.beta&&a.beta!==null&&a.gamma&&a.gamma!==null,accelerationAvailable:r&&r.x&&r.y&&r.z,accelerationIncludingGravityAvailable:y&&y.x&&y.y&&y.z,rotationRateAvailable:b&&b.alpha&&b.beta&&b.gamma}}},i.prototype.isRunning=function(){return A},i}()},(f=(function(){return g}).call(E,p,E,D))===void 0||(D.exports=f)}])});export default H();
